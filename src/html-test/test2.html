<!doctype html>
<html>

<head>
    <title>Our Funky HTML Page</title>
    <meta name="description" content="Our first page">
    <meta name="keywords" content="html tutorial template">
</head>

<!-- How to add paragraphs using a loop -->

<body>
    <script>
        function addListener() {
            var loginForm = document.getElementById('loginForm');
            loginForm.addEventListener("submit", (e) => {
                // get arguments
                let age = document.getElementById("age");
                var ages = document.getElementById("ages");
                var par = document.createElement("p");
                var text = document.createTextNode("the age is " + age.value);
                par.appendChild(text);
                ages.appendChild(par);
                fetch('http://localhost:8080/user', {
                    method: 'POST',
                    headers: {
                        'Access-Control-Allow-Origin' : 'http://localhost:8080/user', 
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ "age": age.value })
                })
                    .then(response => response.json())
                    .then(response => console.log(JSON.stringify(response)))

            });
        }

    </script>

    <div id="container"></div>
    <div id="quote"></div>
    <!-- Prevents form from reloading return false -->
    <form action="" id="loginForm" onsubmit="return false">
        <h1>Login</h1>
        <input type="text" id="age" class="form-control" placeholder="Enter your age...">
        <button type="submit">Submit</button>
    </form>
    <script> addListener()</script>
    <div id="ages"></div>
</body>

</html>